<!DOCTYPE html>
<html lang="en">
    <style>
    body {
      margin: 0;
      padding: 0;
      background-color: rgb(105, 105, 105);
      user-select: none; /* Disable text selection */
      overflow: hidden; /* Disable scroll */
    }
    main {
      width: 100%;
      height: 100%;
    }
    </style>
    <body>
        <button type="button" id="start"> Start </button>
        <main></main>
        <script src="src/joy.js"></script>
        <script>
            const stickContainer = document.querySelector('main');
            document.body.appendChild(stickContainer);
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            if (isMobile) {
            document.querySelector('main').innerHTML = "mobile";
            }
            else {
            const joystickContainer = document.createElement('div');
            joystickContainer.id = "joyDiv"
            joystickContainer.style.position = 'absolute';
            joystickContainer.style.top = '450px';
            joystickContainer.style.left = '20px';
            joystickContainer.style.width = '300px';
            joystickContainer.style.height = '300px';
            stickContainer.appendChild(joystickContainer);
            var joy = new JoyStick('joyDiv');
            }
          // Function that waits for given amount of milliseconds
            function sleep(ms) {
              return new Promise(resolve => setTimeout(resolve, ms));
            }
            document.getElementById("start").onclick = async function() {
              document.getElementById("start").style.display = "none"
              for (let i = 0; i < 5; i++) {
                min = Math.ceil(1);
                max = Math.floor(4);
                random = Math.floor(Math.random() * (max - min) + min); // The maximum is exclusive and the minimum is inclusive
                if (random == 1) {
                  var img = document.createElement("img");
                  img.src = "Hike.jpeg";
                  img.width = 302;
                  img.height = 330;
                  img.alt = "test";
                  img.id = "img";
                  document.body.appendChild(img);
                  await sleep(5000);
                  direction = joy.GetDir()
                  checkdir = direction.localecompare("SW")
                  if (checkdir == 0) { 
                      returnvalue = document.createElement("p")
                      returnvalue.innerHML = "SUCCESS"
                      document.body.appendChild("returnvalue")
                  }
                  else {
                      returnvalue = document.createElement("p")
                      returnvalue.innerHML = "FAIL"
                      document.body.appendChild("returnvalue")
                  }
                const element = document.getElementById('img')
                element.remove()
                }
                else if (random == 2) {
                  var img = document.createElement("img");
                  img.src = "logo.jpg";
                  img.width = 302;
                  img.height = 330;
                  img.alt = "test";
                  img.id = "img";
                  document.body.appendChild(img);
                  await sleep(5000);
                  direction = joy.GetDir()
                  checkdir = direction.localecompare("SW")
                  if (checkdir == 0) { 
                    returnvalue = document.createElement("p")
                    returnvalue.innerHML = "SUCCESS"
                    document.body.appendChild("returnvalue")
                  }
                  else {
                    returnvalue = document.createElement("p")
                    returnvalue.innerHML = "FAIL"
                    document.body.appendChild("returnvalue")
                  }
                const element = document.getElementById('img')
                element.remove()
                }
                else if (random == 3) {
                  var img = document.createElement("img");
                  img.src = "Hike.jpeg";
                  img.width = 302;
                  img.height = 330;
                  img.alt = "test";
                  img.id = "img";
                  document.body.appendChild(img);
                  await sleep(5000);
                  direction = joy.GetDir()
                  checkdir = direction.localecompare("SW")
                  if (direction.localecompare("SW")) { 
                    returnvalue = document.createElement("p")
                    returnvalue.innerHML = "SUCCESS"
                    document.body.appendChild("returnvalue")
                  }
                  else {
                    returnvalue = document.createElement("p")
                    returnvalue.innerHML = "FAIL"
                    document.body.appendChild("returnvalue")
                  }
                const element = document.getElementById('img')
                element.remove()
                }
              }
            }
        </script>
    </body>
</html>